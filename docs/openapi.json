{"openapi":"3.1.0","info":{"title":"Browser Automation Service API","description":"**Knowledge Extraction & Browser Automation API**\n\nExtract knowledge from websites, documentation, and videos, then query the resulting knowledge graph for navigation paths, screens, tasks, and actions.\n\n## Features\n\n- üåê **Multi-Source Ingestion**: Extract from websites, docs, videos\n- üìä **Knowledge Graph**: Query navigation paths and relationships\n- üîÑ **Workflow Tracking**: Real-time progress monitoring\n- ü§ñ **Browser Automation**: WebSocket-based event streaming\n- ‚ö° **Temporal Workflows**: Durable, fault-tolerant execution\n\n## Getting Started\n\n1. Start knowledge extraction: `POST /api/knowledge/ingest/start`\n2. Track progress: `GET /api/knowledge/workflows/status/{job_id}`\n3. Query knowledge: `POST /api/knowledge/graph/query`\n\nFor complete documentation, see `/docs` (Swagger UI) or `/redoc` (ReDoc).","contact":{"name":"Browser Automation Service Team","email":"support@yourservice.com"},"license":{"name":"MIT","url":"https://opensource.org/licenses/MIT"},"version":"1.0.1"},"paths":{"/api/knowledge/ingest/start":{"post":{"tags":["Knowledge Extraction"],"summary":"Start Knowledge Extraction (Two-Phase Process)","description":"Start a knowledge extraction workflow with two phases:\n\n**Phase 1:** Extract knowledge from files or documentation URLs\n- Process uploaded files (video, audio, txt, md, docx, pdf, etc.) OR\n- Process publicly available documentation URLs for crawling\n\n**Phase 2:** DOM-level analysis on website with authentication\n- Use website_url + credentials to perform authenticated DOM analysis\n- Extract additional knowledge through browser-based interaction\n\n**Required Fields:**\n- `website_url`: Target website/webportal for Phase 2 DOM analysis\n- At least one of: `s3_references` (files) OR `documentation_urls`\n\n**Example Request (Files + Website with Credentials):**\n```json\n{\n  \"website_url\": \"https://app.example.com\",\n  \"website_name\": \"Example App\",\n  \"credentials\": {\n    \"username\": \"user@example.com\",\n    \"password\": \"secure-password\",\n    \"login_url\": \"https://app.example.com/signin\"\n  },\n  \"s3_references\": [\n    {\n      \"bucket\": \"knowledge-extraction\",\n      \"key\": \"org-123/file.pdf\",\n      \"presigned_url\": \"https://...\",\n      \"expires_at\": \"2025-01-15T13:00:00Z\"\n    }\n  ],\n  \"file_metadata_list\": [\n    {\n      \"filename\": \"documentation.pdf\",\n      \"size\": 1048576,\n      \"content_type\": \"application/pdf\"\n    }\n  ],\n  \"documentation_urls\": [\"https://docs.example.com\"],\n  \"options\": {\n    \"max_pages\": 100,\n    \"max_depth\": 10\n  },\n  \"knowledge_id\": \"696cc27b31f1cd2e29d55bc1\"\n}\n```\n\n**Note:** `s3_references` and `file_metadata_list` must have the same length.\n`login_url` in credentials is optional - crawler will auto-detect login pages.\n\n**Process:**\n1. Phase 1: Process files/documentation URLs\n2. Phase 2: Perform authenticated DOM analysis on website\n3. Receive `job_id` for tracking\n4. Poll `/workflows/status/{job_id}` for progress\n5. Query extracted knowledge via graph API","operationId":"start_ingestion_api_knowledge_ingest_start_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StartIngestionRequest"}}},"required":true},"responses":{"200":{"description":"Workflow started successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StartIngestionResponse"},"example":{"job_id":"job-abc-123","workflow_id":"knowledge-extraction-job-abc-123","status":"queued","estimated_duration_seconds":1200,"message":"Knowledge extraction started: Phase 1 (2 source(s)), Phase 2 (DOM analysis on https://app.example.com)"}}}},"400":{"description":"Invalid request parameters"},"500":{"description":"Internal server error"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/knowledge/ingest/upload":{"post":{"tags":["Knowledge Extraction"],"summary":"Start Ingestion Upload","description":"Start knowledge extraction with file upload (Phase 6.1).\n\nSupports:\n- Documentation files (Markdown, PDF, TXT)\n- Video files (MP4, MOV, AVI)\n\nFile is saved and processed by the workflow.","operationId":"start_ingestion_upload_api_knowledge_ingest_upload_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_start_ingestion_upload_api_knowledge_ingest_upload_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StartIngestionResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/knowledge/graph/query":{"post":{"tags":["Knowledge Extraction"],"summary":"Query Knowledge Graph","description":"Query the extracted knowledge graph for navigation paths, screen relationships, and transitions.\n\n**Query Types:**\n\n- `find_path`: Find shortest path between two screens\n  - Requires: `source_screen_id`, `target_screen_id`\n- `get_neighbors`: Get adjacent screens\n  - Requires: `source_screen_id`\n- `search_screens`: Search screens by name or website\n  - Requires: `screen_name` or `website_id`\n- `get_transitions`: Get transitions from a screen\n  - Requires: `source_screen_id`\n\n**Pagination:** Use `limit` parameter (default: 10, max: 100)","operationId":"query_graph_api_knowledge_graph_query_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/GraphQueryRequest"}}},"required":true},"responses":{"200":{"description":"Query executed successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GraphQueryResponse"},"example":{"query_type":"search_screens","results":[{"count":42,"website_id":"example.com"}],"count":1,"execution_time_ms":125.5}}}},"400":{"description":"Invalid query parameters"},"500":{"description":"Query execution failed"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/knowledge/screens/{screen_id}":{"get":{"tags":["Knowledge Extraction"],"summary":"Get Screen Definition","description":"Get full screen definition from MongoDB (Phase 6.3).\n\nReturns complete screen definition with:\n- State signature (indicators)\n- UI elements with selectors\n- Affordances\n- Metadata","operationId":"get_screen_definition_api_knowledge_screens__screen_id__get","parameters":[{"name":"screen_id","in":"path","required":true,"schema":{"type":"string","title":"Screen Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Screen Definition Api Knowledge Screens  Screen Id  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/knowledge/tasks/{task_id}":{"get":{"tags":["Knowledge Extraction"],"summary":"Get Task Definition","description":"Get full task definition from MongoDB (Phase 6.3).\n\nReturns complete task definition with:\n- Steps with action references\n- Preconditions and postconditions\n- Iterator spec (if loops present)\n- IO spec (inputs/outputs with volatility)","operationId":"get_task_definition_api_knowledge_tasks__task_id__get","parameters":[{"name":"task_id","in":"path","required":true,"schema":{"type":"string","title":"Task Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Task Definition Api Knowledge Tasks  Task Id  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/knowledge/actions/{action_id}":{"get":{"tags":["Knowledge Extraction"],"summary":"Get Action Definition","description":"Get full action definition from MongoDB (Phase 6.3).\n\nReturns complete action definition with:\n- Action type and parameters\n- Target selector\n- Preconditions and postconditions\n- Idempotency flag\n- Error handling strategy","operationId":"get_action_definition_api_knowledge_actions__action_id__get","parameters":[{"name":"action_id","in":"path","required":true,"schema":{"type":"string","title":"Action Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Action Definition Api Knowledge Actions  Action Id  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/knowledge/transitions/{transition_id}":{"get":{"tags":["Knowledge Extraction"],"summary":"Get Transition Definition","description":"Get full transition definition from MongoDB (Phase 6.3).\n\nReturns complete transition definition with:\n- Source and target screens\n- Trigger action\n- Conditions (required/optional)\n- Effects (state changes)\n- Cost estimation\n- Reliability score","operationId":"get_transition_definition_api_knowledge_transitions__transition_id__get","parameters":[{"name":"transition_id","in":"path","required":true,"schema":{"type":"string","title":"Transition Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Transition Definition Api Knowledge Transitions  Transition Id  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/knowledge/screens":{"get":{"tags":["Knowledge Extraction"],"summary":"List Screens","description":"List screens by knowledge_id (preferred) or website_id (legacy).\n\n**Preferred:** Use `knowledge_id` parameter to query by knowledge ID.\n**Legacy:** Use `website_id` parameter for backward compatibility.","operationId":"list_screens_api_knowledge_screens_get","parameters":[{"name":"knowledge_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Knowledge Id"}},{"name":"website_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Website Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","additionalProperties":true},"title":"Response List Screens Api Knowledge Screens Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/knowledge/tasks":{"get":{"tags":["Knowledge Extraction"],"summary":"List Tasks","description":"List tasks by knowledge_id (preferred) or website_id (legacy).\n\n**Preferred:** Use `knowledge_id` parameter to query by knowledge ID.\n**Legacy:** Use `website_id` parameter for backward compatibility.","operationId":"list_tasks_api_knowledge_tasks_get","parameters":[{"name":"knowledge_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Knowledge Id"}},{"name":"website_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Website Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","additionalProperties":true},"title":"Response List Tasks Api Knowledge Tasks Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/knowledge/actions":{"get":{"tags":["Knowledge Extraction"],"summary":"List Actions","description":"List actions by knowledge_id.\n\n**Required:** `knowledge_id` parameter to query by knowledge ID.","operationId":"list_actions_api_knowledge_actions_get","parameters":[{"name":"knowledge_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Knowledge Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","additionalProperties":true},"title":"Response List Actions Api Knowledge Actions Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/knowledge/transitions":{"get":{"tags":["Knowledge Extraction"],"summary":"List Transitions","description":"List transitions by knowledge_id.\n\n**Required:** `knowledge_id` parameter to query by knowledge ID.","operationId":"list_transitions_api_knowledge_transitions_get","parameters":[{"name":"knowledge_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Knowledge Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":1000,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","additionalProperties":true},"title":"Response List Transitions Api Knowledge Transitions Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/knowledge/business-functions":{"get":{"tags":["Knowledge Extraction"],"summary":"List Business Functions","description":"List business functions by knowledge_id.\n\n**Required:** `knowledge_id` parameter to query by knowledge ID.","operationId":"list_business_functions_api_knowledge_business_functions_get","parameters":[{"name":"knowledge_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Knowledge Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","additionalProperties":true},"title":"Response List Business Functions Api Knowledge Business Functions Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/knowledge/workflows":{"get":{"tags":["Knowledge Extraction"],"summary":"List Workflows","description":"List workflows by knowledge_id.\n\n**Required:** `knowledge_id` parameter to query by knowledge ID.","operationId":"list_workflows_api_knowledge_workflows_get","parameters":[{"name":"knowledge_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Knowledge Id"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","additionalProperties":true},"title":"Response List Workflows Api Knowledge Workflows Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/knowledge/query/{knowledge_id}":{"get":{"tags":["Knowledge Extraction"],"summary":"Get All Knowledge by Knowledge ID (Primary Endpoint)","description":"**PRIMARY ENDPOINT** - Retrieve all knowledge entities (screens, tasks, actions, transitions, business functions, workflows) associated with a knowledge_id.\n\nThis is the main endpoint for querying extracted knowledge. All entities are grouped by knowledge_id during extraction and can be retrieved together using this endpoint.\n\n**Query Behavior:**\n- If `job_id` is provided: Returns knowledge for that specific job (historical view)\n- If `job_id` is not provided: Returns latest knowledge (most recent job) for the knowledge_id\n\n**Returns:**\n- `screens`: List of screen definitions\n- `tasks`: List of task definitions\n- `actions`: List of action definitions\n- `transitions`: List of transition definitions\n- `business_functions`: List of business function definitions\n- `workflows`: List of operational workflow definitions\n- `statistics`: Summary counts for each entity type\n- `job_id`: The job_id used for this query (if provided or latest)\n\n**Usage:**\n```\nGET /api/knowledge/query/{knowledge_id}?job_id={job_id}\n```\n\n**Examples:**\n```\n# Get latest knowledge\nGET /api/knowledge/query/696d1b52e1c3d23b77b94982\n\n# Get knowledge for specific job\nGET /api/knowledge/query/696d1b52e1c3d23b77b94982?job_id=job-abc-123\n```\n\n**Error Handling:**\nIf `job_id` is provided and no knowledge is found, the job will be marked as failed with an error.","operationId":"get_knowledge_by_id_api_knowledge_query__knowledge_id__get","parameters":[{"name":"knowledge_id","in":"path","required":true,"schema":{"type":"string","title":"Knowledge Id"}},{"name":"job_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Job Id"}}],"responses":{"200":{"description":"Knowledge retrieved successfully","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Get Knowledge By Id Api Knowledge Query  Knowledge Id  Get"},"example":{"knowledge_id":"696d1b52e1c3d23b77b94982","job_id":"job-abc-123","screens":[{"screen_id":"...","name":"..."}],"tasks":[{"task_id":"...","name":"..."}],"actions":[{"action_id":"...","name":"..."}],"transitions":[{"transition_id":"...","source":"...","target":"..."}],"business_functions":[{"business_function_id":"...","name":"..."}],"workflows":[{"workflow_id":"...","name":"..."}],"statistics":{"screens_count":6,"tasks_count":46,"actions_count":3,"transitions_count":65,"business_functions_count":4,"workflows_count":4,"total_entities":128}}}}},"404":{"description":"Knowledge not found"},"500":{"description":"Internal server error"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/knowledge/workflows/status/{job_id}":{"get":{"tags":["Knowledge Extraction"],"summary":"Get Workflow Status","description":"Get detailed workflow status (Phase 6.4).\n\nQueries both MongoDB (for persisted state, errors, warnings, checkpoints) and\nTemporal (for authoritative real-time status and progress).\n\nReturns:\n- Current status and phase (from Temporal)\n- Progress percentage (from Temporal workflow query)\n- Errors and warnings (from MongoDB)\n- Checkpoint information (from MongoDB)\n- Timestamps (from Temporal and MongoDB)","operationId":"get_workflow_status_api_knowledge_workflows_status__job_id__get","parameters":[{"name":"job_id","in":"path","required":true,"schema":{"type":"string","title":"Job Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/WorkflowStatusResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/knowledge/workflows/list":{"get":{"tags":["Knowledge Extraction"],"summary":"List Workflows","description":"List workflows (optionally filtered by status).\n\nSupports pagination via limit parameter.","operationId":"list_workflows_api_knowledge_workflows_list_get","parameters":[{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/WorkflowStatus"},{"type":"null"}],"title":"Status"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","additionalProperties":true},"title":"Response List Workflows Api Knowledge Workflows List Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/knowledge/verify/start":{"post":{"tags":["Knowledge Extraction"],"summary":"Start Verification","description":"Start browser-based verification workflow (Phase 7).\n\nVerifies extracted knowledge by:\n- Navigating to screens\n- Executing tasks\n- Validating state signatures\n- Checking UI elements\n\nReturns verification_job_id for tracking progress.\n\nNote: Requires FEATURE_BROWSER_VERIFICATION=true","operationId":"start_verification_api_knowledge_verify_start_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/VerificationRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/VerificationResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/knowledge/health":{"get":{"tags":["Knowledge Extraction"],"summary":"Health Check","description":"Health check endpoint.","operationId":"health_check_api_knowledge_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Health Check Api Knowledge Health Get"}}}}}}},"/health":{"get":{"tags":["Health"],"summary":"Health Check","description":"Check if the service is running and healthy.","operationId":"health_check_health_get","responses":{"200":{"description":"Service health status","content":{"application/json":{"schema":{}}}}}}},"/api/knowledge/worker/status":{"get":{"summary":"Get Worker Status","description":"Get worker status and job information.","operationId":"get_worker_status_api_knowledge_worker_status_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/rooms/{room_name}/connections":{"get":{"summary":"Get Connections","description":"Get number of WebSocket connections for a room.","operationId":"get_connections_rooms__room_name__connections_get","parameters":[{"name":"room_name","in":"path","required":true,"schema":{"type":"string","title":"Room Name"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/mcp/tools/call":{"post":{"summary":"Call Mcp Tool","description":"HTTP endpoint for MCP tool calls from Voice Agent Service.\n\nExpected request format:\n{\n        \"tool\": \"tool_name\",\n        \"arguments\": {...}\n}","operationId":"call_mcp_tool_mcp_tools_call_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/mcp/tools":{"get":{"summary":"List Mcp Tools","description":"List all available MCP tools.","operationId":"list_mcp_tools_mcp_tools_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"Body_start_ingestion_upload_api_knowledge_ingest_upload_post":{"properties":{"source_type":{"$ref":"#/components/schemas/SourceType"},"source_name":{"type":"string","title":"Source Name"},"file":{"type":"string","format":"binary","title":"File"},"job_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Job Id"}},"type":"object","required":["source_type","source_name","file"],"title":"Body_start_ingestion_upload_api_knowledge_ingest_upload_post"},"CheckpointInfo":{"properties":{"activity_name":{"type":"string","title":"Activity Name"},"checkpoint_id":{"type":"integer","title":"Checkpoint Id"},"items_processed":{"type":"integer","title":"Items Processed"},"total_items":{"type":"integer","title":"Total Items"},"progress_percentage":{"type":"number","title":"Progress Percentage"}},"type":"object","required":["activity_name","checkpoint_id","items_processed","total_items","progress_percentage"],"title":"CheckpointInfo","description":"Checkpoint information."},"FileMetadata":{"properties":{"filename":{"type":"string","title":"Filename","description":"Original filename"},"size":{"type":"integer","exclusiveMinimum":0.0,"title":"Size","description":"File size in bytes"},"content_type":{"type":"string","title":"Content Type","description":"MIME type (e.g., 'application/pdf', 'video/mp4')"},"uploaded_at":{"type":"string","title":"Uploaded At","description":"ISO 8601 timestamp when file was uploaded"}},"type":"object","required":["filename","size","content_type","uploaded_at"],"title":"FileMetadata","description":"Metadata for uploaded files.\n\nProvided by the UI server after file upload to S3."},"GraphQueryRequest":{"properties":{"query_type":{"type":"string","enum":["find_path","get_neighbors","search_screens","get_transitions"],"title":"Query Type","description":"Query type"},"source_screen_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Source Screen Id","description":"Source screen ID (for find_path, get_transitions)"},"target_screen_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Target Screen Id","description":"Target screen ID (for find_path)"},"screen_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Screen Name","description":"Screen name to search (for search_screens)"},"website_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Website Id","description":"Website ID filter"},"limit":{"type":"integer","title":"Limit","description":"Maximum results to return","default":10}},"type":"object","required":["query_type"],"title":"GraphQueryRequest","description":"Request model for graph queries."},"GraphQueryResponse":{"properties":{"query_type":{"type":"string","title":"Query Type","description":"Query type executed"},"results":{"items":{"additionalProperties":true,"type":"object"},"type":"array","title":"Results","description":"Query results"},"count":{"type":"integer","title":"Count","description":"Number of results returned"},"execution_time_ms":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Execution Time Ms","description":"Query execution time in milliseconds"}},"type":"object","required":["query_type","results","count"],"title":"GraphQueryResponse","description":"Response model for graph queries."},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"IngestionOptionsModel":{"properties":{"max_pages":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Max Pages","description":"Maximum pages to crawl (website only)"},"max_depth":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Max Depth","description":"Maximum crawl depth (website only)"},"extract_code_blocks":{"type":"boolean","title":"Extract Code Blocks","description":"Extract code blocks (documentation only)","default":true},"extract_thumbnails":{"type":"boolean","title":"Extract Thumbnails","description":"Extract video thumbnails (video only)","default":true},"credentials":{"anyOf":[{"additionalProperties":{"type":"string"},"type":"object"},{"type":"null"}],"title":"Credentials","description":"Optional credentials for website login: {'username': '...', 'password': '...', 'login_url': '...'}"}},"type":"object","title":"IngestionOptionsModel","description":"Options for ingestion."},"S3Reference":{"properties":{"bucket":{"type":"string","title":"Bucket","description":"S3 bucket name"},"key":{"type":"string","title":"Key","description":"Object key/path in bucket"},"region":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Region","description":"AWS region (e.g., 'us-east-1'). Optional for DigitalOcean Spaces."},"endpoint":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Endpoint","description":"Custom S3 endpoint for DigitalOcean Spaces (e.g., 'https://nyc3.digitaloceanspaces.com')"},"presigned_url":{"type":"string","title":"Presigned Url","description":"Presigned URL for downloading (valid for 1 hour)"},"expires_at":{"type":"string","title":"Expires At","description":"ISO 8601 timestamp when presigned URL expires"}},"type":"object","required":["bucket","key","presigned_url","expires_at"],"title":"S3Reference","description":"S3 object reference with presigned URL.\n\nSupports:\n- AWS S3 (IAM-based in production)\n- DigitalOcean Spaces (Access Key based in development)"},"SourceType":{"type":"string","enum":["documentation","website","video","file"],"title":"SourceType","description":"Source type for ingestion."},"StartIngestionRequest":{"properties":{"website_url":{"type":"string","title":"Website Url","description":"Website/webportal URL for authenticated DOM-level analysis (Phase 2)"},"website_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Website Name","description":"Human-readable website name"},"s3_references":{"anyOf":[{"items":{"$ref":"#/components/schemas/S3Reference"},"type":"array"},{"type":"null"}],"title":"S3 References","description":"Array of S3 file references (videos, audio, txt, md, docx, pdf, etc.) for Phase 1 processing"},"file_metadata_list":{"anyOf":[{"items":{"$ref":"#/components/schemas/FileMetadata"},"type":"array"},{"type":"null"}],"title":"File Metadata List","description":"Array of file metadata matching s3_references (required if s3_references provided)"},"documentation_urls":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"null"}],"title":"Documentation Urls","description":"Array of publicly available documentation URLs for crawling in Phase 1"},"credentials":{"anyOf":[{"additionalProperties":{"type":"string"},"type":"object"},{"type":"null"}],"title":"Credentials","description":"Credentials for website login: {'username': '...', 'password': '...', 'login_url': '...'}"},"options":{"$ref":"#/components/schemas/IngestionOptionsModel","description":"Extraction options (max_pages, max_depth, etc.)"},"job_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Job Id","description":"Optional job ID (auto-generated if not provided)"},"knowledge_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Knowledge Id","description":"Knowledge ID for persisting and querying extracted knowledge (required for proper data storage)"}},"type":"object","required":["website_url"],"title":"StartIngestionRequest","description":"Request model for starting knowledge extraction.\n\nTwo-phase knowledge extraction process:\n\nPhase 1: Extract knowledge from files or documentation URLs\n- Process uploaded files (video, audio, txt, md, docx, pdf, etc.) OR\n- Process publicly available documentation URLs for crawling\n\nPhase 2: DOM-level analysis on website with authentication\n- Use website_url + credentials to perform authenticated DOM analysis\n- Extract additional knowledge through browser-based interaction\n\nRequired:\n- website_url: Target website/webportal for Phase 2 DOM analysis\n- At least one of: files (s3_references) OR documentation_urls\n\nOptional:\n- credentials: Authentication details for website login"},"StartIngestionResponse":{"properties":{"job_id":{"type":"string","title":"Job Id","description":"Workflow execution ID"},"workflow_id":{"type":"string","title":"Workflow Id","description":"Temporal workflow ID"},"status":{"type":"string","title":"Status","description":"Initial status (queued)"},"estimated_duration_seconds":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Estimated Duration Seconds","description":"Estimated completion time"},"message":{"type":"string","title":"Message","description":"Human-readable message"}},"type":"object","required":["job_id","workflow_id","status","message"],"title":"StartIngestionResponse","description":"Response model for starting ingestion."},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"},"VerificationRequest":{"properties":{"target_type":{"type":"string","enum":["job","screen","task"],"title":"Target Type","description":"Verification target type"},"target_id":{"type":"string","title":"Target Id","description":"Target ID (job_id, screen_id, or task_id)"},"verification_options":{"additionalProperties":true,"type":"object","title":"Verification Options","description":"Verification options"}},"type":"object","required":["target_type","target_id"],"title":"VerificationRequest","description":"Request model for starting verification."},"VerificationResponse":{"properties":{"verification_job_id":{"type":"string","title":"Verification Job Id","description":"Verification workflow ID"},"target_type":{"type":"string","title":"Target Type"},"target_id":{"type":"string","title":"Target Id"},"status":{"type":"string","title":"Status","description":"Initial status (queued)"},"message":{"type":"string","title":"Message"}},"type":"object","required":["verification_job_id","target_type","target_id","status","message"],"title":"VerificationResponse","description":"Response model for verification start."},"WorkflowStatus":{"type":"string","enum":["queued","running","paused","completed","failed","cancelled"],"title":"WorkflowStatus","description":"Workflow execution status."},"WorkflowStatusResponse":{"properties":{"job_id":{"type":"string","title":"Job Id"},"workflow_id":{"type":"string","title":"Workflow Id"},"status":{"type":"string","title":"Status"},"phase":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Phase"},"progress":{"type":"number","title":"Progress"},"errors":{"items":{"type":"string"},"type":"array","title":"Errors"},"warnings":{"items":{"type":"string"},"type":"array","title":"Warnings"},"checkpoints":{"items":{"$ref":"#/components/schemas/CheckpointInfo"},"type":"array","title":"Checkpoints"},"created_at":{"type":"string","title":"Created At"},"updated_at":{"type":"string","title":"Updated At"},"metadata":{"additionalProperties":true,"type":"object","title":"Metadata"}},"type":"object","required":["job_id","workflow_id","status","phase","progress","errors","warnings","checkpoints","created_at","updated_at","metadata"],"title":"WorkflowStatusResponse","description":"Response model for workflow status."}}}}